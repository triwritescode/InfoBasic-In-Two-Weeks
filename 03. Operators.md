---
type: concept
tags:
  - Programming
  - InfoBasic
---
## Assignment

- **`=`** — assigns the right-hand value to the left.

```basic
A = 5
B = "Bank"
```

---
## Arithmetic

- **`+ - * /`** — standard math; operands are **coerced to numeric** (non-numeric becomes `0`).
- **Power**: **`^`** (common in InfoBasic). On some MV systems `**` exists; if unsure, prefer `^` or a `POWER(x,y)` helper.
- **Unary minus**: `-x`.
- Rounding is a **function** (`ROUND(x,n)`), **not** an operator.

```basic
NET = 1000 - 125.5
RATE = 1.05 ^ 2
;* Guard numeric coercion
IF NOT(NUM(AMT)) THEN AMT = 0
```

---
## String

- **Concatenation:** **`:`** (string cat).
- **Slice (indexing):** `s[pos,len]` (1-based; technically not an operator but used like one).

```basic
FULL = "Mr " : "Adi"          ;* "Mr Adi"
HEAD = FULL[1,2]              ;* "Mr"
```

**Pitfall:** `:` has **lower precedence** than arithmetic.  `"A" : 1 + 2` ⇒ `"A3"` (because `1+2` happens first). Use parentheses when mixing: `"Fee: " : (AMT)`

---
## Comparison

- **`= # < > <= >=`**
	- If **both** operands look numeric → **numeric** comparison.
    - Otherwise → **string/lexicographic** comparison.

```basic
IF "10" < "2" THEN ... ;* false numerically (10 < 2?) but true lexicographically
IF NUM(A) AND NUM(B) THEN IF A < B THEN ...
```

Synonyms like `NE`, `LE`, `GE` may exist in some environments, but the symbols above are most portable.

| Meaning          | Symbolic  | Word form | Temenos-common                         |
| ---------------- | --------- | --------- | -------------------------------------- |
| Equal            | `=`       | `EQ`      | ✅ Use                                  |
| Not equal        | `#`, `<>` | `NE`      | ✅ Use (`#` is most common in T24 code) |
| Less than        | `<`       | `LT`      | ✅ Use                                  |
| Less or equal    | `<=`      | `LE`      | ✅ Use                                  |
| Greater than     | `>`       | `GT`      | ✅ Use                                  |
| Greater or equal | `>=`      | `GE`      | ✅ Use                                  |

---
## Logical

- **`AND` , `OR` ,`NOT`** — operate on numeric truth values (0=false, non-zero=true).

```basic
IF NUM(AMT) AND AMT > 0 THEN CRT "OK"
IF NOT(ID # "") THEN CRT "missing"
```

**Tip:** Don’t rely on short-circuit evaluation; keep guards explicit:

```basic
IF NUM(AMT) THEN
   IF AMT > 0 THEN ...
END
```

---
## Pattern Matching

- **`MATCHES`** — powerful string pattern operator using MV “match codes.”
	- `N` = digit, `A` = letter, `X` = any non-null character
	- Prefix with a count: `2N` = exactly two digits
	- Use quotes and literal separators (like `'-'`)

```basic
IF ID MATCHES "2N'-'2N'-'4N" THEN CRT "looks like DD-MM-YYYY"
IF NAME MATCHES "1A' '1A" THEN CRT "Two initials with a space"
```

**Tip:** Start with simple shapes (digits/letters) and include fixed punctuation literally.

---
## Membership / Containment (idioms)

**InfoBasic doesn’t have a native `IN` operator**, so “membership/containment idioms” are the **reliable patterns** we use to answer “is X inside Y?” without bugs or false positives—while staying fast and readable.

```basic
IF INDEX(UPCASE(TEXT), "ERROR", 1) > 0 THEN CRT "Contains ERROR"
```

1. **`UPCASE(TEXT)`**
    - Converts the whole `TEXT` to uppercase so the search is **case-insensitive** (it will match `error`, `Error`, etc.).
2. **`INDEX(haystack, needle, 1)`**
    - Searches for the substring `"ERROR"` inside the (now uppercased) `TEXT`.
    - The **third argument `1`** means “start searching from the first character” (and in some MV dialects it’s interpreted as “return the position of the **first occurrence**”).
    - Returns a **1-based position** if found, or **0** if not found.
3. **`> 0`**
    - If the position is greater than zero, the substring exists.    
4. **`THEN CRT "Contains ERROR"`**
    - Prints the message to the console (think `console.log`).

### Examples

| `TEXT`                     | `UPCASE(TEXT)`             | `INDEX(...,"ERROR",1)` | Prints? |
| -------------------------- | -------------------------- | ---------------------: | :-----: |
| `"System ERROR at step 3"` | `"SYSTEM ERROR AT STEP 3"` |                    `8` |    ✅    |
| `"No issues"`              | `"NO ISSUES"`              |                    `0` |    ❌    |
| `"minor Error: retry"`     | `"MINOR ERROR: RETRY"`     |                    `7` |    ✅    |

---
## MV (MultiValue) “operators”

Not operators per-se, but used like them when working with dynamic arrays:
- **Extraction:** `rec<attr{,val{,sub}}>`
- **In-place replace:** `REPLACE rec<2,1> WITH "IDR"`

```basic
PHONE = CUST<12,2,1>
REPLACE CUST<12,3,1> WITH "021-555555"
```

1. **Look up `CUST<12,2,1>`**
    - Go to **attribute 12**, then **value #2**, then **subvalue #1** in `CUST`.
    - If it exists, take that text; if it doesn’t, treat it as `''` (empty).
2. **Assign to `PHONE`**
    - Put the looked-up text into variable `PHONE` (so `PHONE` now holds that phone number or `''`).
3. **Prepare to update `CUST<12,3,1>`**
    - Target **attribute 12**, **value #3**, **subvalue #1**.
4. **Auto-expand if needed**
    - If value #3 doesn’t exist yet, InfoBasic **creates missing values** up to #3 (any gaps become empty).
5. **Replace in place**
    - Write `"021-555555"` into `CUST<12,3,1>` (this is an in-memory update).
6. **Done (still in memory)**
    - No database change has happened yet. To persist, you must `WRITE/WRITEU` the `CUST` record (typically under `READU`/`RELEASE` locking).
---
## Precedence (practical order of evaluation)

From **higher → lower** (most to least binding):

1. **Parentheses** `( … )`
2. **Unary** `-x`, and **Power** `^`
3. **Multiplicative** `* /`
4. **Additive** `+ -`
5. **String concat** `:`
6. **Relational** `= # < > <= >=`
7. **Logical** `NOT AND OR`
8. **MATCHES** (treat like comparison)

**Rule of thumb:** When mixing `:` with math or comparisons, **use parentheses**.

---
## Booleans & Truthiness refresher

- Empty string `''` and numeric `0` are **false**. Anything else **true**.
- Comparisons and `MATCHES` return numeric 1/0.

```basic
OK = (AMT > 0) AND (CURR = "IDR")
IF OK THEN ...
```

---
## Money, Dates, and “operators” that are actually functions

Formatting and conversion are **functions**:
- **Money**: `OCONV(AMT,"MR2")`, `OCONV(AMT,"MD2")`
- **Dates**: `ICONV("15/09/2025","D/E")`, `OCONV(d,"D4-")`
- **Modulo**: `MOD(a,b)` (function), not an operator in many InfoBasic dialects.

---
## Gotchas & defensive habits

- **Numeric coercion surprises:** Always guard with `NUM(x)` before arithmetic or numeric compares.
- **String vs numeric compare:** Force the intended mode (e.g., convert with `ICONV/OCONV` or wrap in `NUM()` checks).
- **Concat vs add:** `"1" : 2` ⇒ `"12"`; `"1" + 2` ⇒ `3`. Be explicit.
- **Don’t assume short-circuit:** split guards across lines when side-effects exist.
- **Locale/format at boundaries:** never rely on implicit display; always `OCONV` on output.

---
## Cheatsheet

| Category   | Operator        | Notes                                                  |
| ---------- | --------------- | ------------------------------------------------------ |
| Assignment | `=`             | Simple assignment                                      |
| Arithmetic | `+ - * / ^`     | Coerces strings to numbers; `^` = power                |
| String     | `:`             | Concatenation; lower precedence than math              |
| Slice      | `[pos,len]`     | 1-based substring (syntax form)                        |
| Relational | `= # < > <= >=` | Numeric if both numeric, else lexicographic            |
| Logical    | `AND OR NOT`    | Truth values are 1/0; avoid relying on short-circuit   |
| Pattern    | `MATCHES`       | MV match codes: `N`, `A`, `X`, counts like `2N`        |
| MV access  | `<a{,v{,s}}>`   | Dynamic array extraction; `REPLACE … WITH …` to update |