---
type: concept
tags:
  - Programming
---
## Variables

- **What they are:** Untyped containers; a var can hold text, numbers, MV arrays—type is decided by **context**.
- **Defaults:** Uninitialized ⇒ empty string `''` (not `NULL`).
- **Truthiness:** `''` and `0` are false; everything else is true.
- **Scope & passing:** Local to the routine; arguments are typically **by reference** (callee can modify).

```basic
X = ""        ;* empty
IF X THEN CRT "true" ELSE CRT "false"    ;* false
```

---
## Numbers

- **Nature:** Dynamically coerced from strings in numeric contexts (`+ - * /`).
- **Guarding:** Use `NUM(x)` before math to avoid `"ABC" + 5` ⇒ `5`.
- **Rounding & masks:** `ROUND(x,n)`, `INT`, `MOD`; format with `OCONV(x,"MD2")` or `OCONV(x,"MR2")` (money).

```basic
AMT = "12.345"
IF NUM(AMT) THEN CRT OCONV(ROUND(AMT,2),"MR2")   ;* 12.35
```

---
## Strings

- **Concat & slice:** `:` concatenates; `s[pos,len]` (1-based) slices.
- **Cleaning & search:** `TRIM`, `UPCASE/LOWCASE`, `INDEX(str, pat, 1)`.

```basic
FULL = "Mr " : "Adi"
CRT FULL[1,2]                  ;* "Mr"
IF INDEX(UPCASE(FULL),"ADI",1) THEN CRT "found"
```

---
## Dynamic Arrays (MV)

- **Delimiters:** `@FM` (field), `@VM` (multivalue), `@SM` (subvalue).
- **Access:** `rec<attr{,val{,sub}}>`; missing parts read as `''`.
- **Toolkit:** `DCOUNT(var, @VM)`, `FIELD(str, delim, n)`, `REPLACE`, `CHANGE`, `CONVERT`.

```basic
REC = ""
REC<1> = "John Doe"
REC<2,1> = "MTN Rwanda"         ;* value 1
REC<2,2,1> = "0788000000"       ;* value 2, subvalue 1
CRT REC<2,2,1>                  ;* 0788000000
```

---
## Dates/Times

- **Internal forms:** date = integer day count; time = seconds since midnight.
- **Convert:** `ICONV(ext,"D/E")` or `"D4-"` → internal; `OCONV(int,"D4-")`/`"MT"` → external.
- **Math:** add/subtract days by integer arithmetic.

```basic
D = ICONV("15/09/2025","D/E")
NEXT = D + 7
CRT OCONV(NEXT,"D4-")           ;* 2025-09-22
CRT OCONV(TIME(),"MT")          ;* HH:MM:SS
```

---
## Booleans

- **No separate type.** Results of comparisons are numeric truth values.
- **Comparators:** `= # < > <= >=` ; pattern: `MATCHES`.

```basic
IF AMT > 0 THEN CRT "positive"
IF ID MATCHES "2N'-'2N'-'4N" THEN CRT "looks like DD-MM-YYYY"
```

---
## Dimensioned Arrays (fixed-size)

- **What they are:** Pre-sized, 1-based index arrays via `DIM`; good for numeric loops and MAT ops.
- **Contrast:** MV arrays are delimiter-based, ragged, great for records; DIM arrays are fixed grids.

```basic
DIM SCORES(3)
SCORES(1)=80 ; SCORES(2)=90 ; SCORES(3)=88
TOT=0 ; FOR I=1 TO 3 ; TOT+=SCORES(I) ; NEXT I
CRT TOT
```

---
## Special Variables

- **Delimiters:** `@FM`, `@VM`, `@SM` (read-only marks: 254/253/252).    
- **Date/Time now:** `@DATE`, `@TIME` (internal forms).
- **Record context (when provided):** `@ID`, `@RECORD` (current key & full record in some hooks).
- **Note:** Treat special vars as **read-only** unless your hook explicitly allows changes.

---
## Cheatsheet

| **Category** | **Core Idea**             | **Must-know Ops**                                 |
| ------------ | ------------------------- | ------------------------------------------------- |
| Variables    | Untyped, context-driven   | —                                                 |
| Numbers      | Coerced from strings      | `NUM`, `ROUND`, `INT`, `MOD`, `OCONV "MD/MR"`     |
| Strings      | `:` concat, 1-based slice | `TRIM`, `UPCASE/LOWCASE`, `INDEX`                 |
| MV Arrays    | `@FM/@VM/@SM`, `<a,v,s>`  | `DCOUNT`, `FIELD`, `REPLACE`, `CHANGE`, `CONVERT` |
| Dates/Times  | Internal ints/seconds     | `ICONV/OCONV` (`D/E`, `D4-`, `MT`), arithmetic    |
| Booleans     | No type; truthiness       | Comparators, `MATCHES`                            |
| DIM Arrays   | Fixed-size containers     | `DIM`, indexed loops, `MATREAD/MATWRITE`          |
| Special Vars | System context            | `@FM/@VM/@SM`, `@DATE/@TIME`, `@ID/@RECORD`       |
